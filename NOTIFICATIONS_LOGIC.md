# –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 1. –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
Frontend (NotificationContext) 
    ‚Üì –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
Backend (unread-counts)
    ‚Üì –∑–∞–ø—Ä–æ—Å –∫ –ë–î
PostgreSQL (–ø–æ–¥—Å—á—ë—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö)
    ‚Üì —Ä–µ–∑—É–ª—å—Ç–∞—Ç
Frontend (–∑–≤—É–∫ + –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)
```

### 2. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: NotificationContext

**–§–∞–π–ª:** `src/contexts/NotificationContext.tsx`

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å** - –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ backend
2. **–ó–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∑–≤—É–∫ –ø—Ä–∏ –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
3. **–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
4. **Debounce** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–º–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)

#### –¢–∏–ø—ã —Å—á—ë—Ç—á–∏–∫–æ–≤:

```typescript
interface UnreadCounts {
  tickets: number;    // –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
  tasks: number;      // –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
  messages: number;   // –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  submissions: number; // –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞)
}
```

#### –ó–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- –ß–∞—Å—Ç–æ—Ç–∞: 800 Hz (—Å–∏–Ω—É—Å–æ–∏–¥–∞)
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 0.3 —Å–µ–∫—É–Ω–¥—ã
- –ì—Ä–æ–º–∫–æ—Å—Ç—å: 30%
- –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Å—á—ë—Ç—á–∏–∫–æ–≤

#### –ë—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏: –∫–∞–∫–æ–π —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö
- –ò–∫–æ–Ω–∫–∞: `/favicon.ico`

---

### 3. Backend API: unread-counts

**–§–∞–π–ª:** `backend/unread-counts/index.py`

**Endpoint:** `GET /unread-counts`

**Headers:**
- `X-User-Id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `X-Auth-Token` - —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

#### –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á—ë—Ç–∞ –ø–æ —Ä–æ–ª—è–º:

---

## üéØ –î–ª—è –î–ò–†–ï–ö–¢–û–†–ê (director):

### –¢–∏–∫–µ—Ç—ã:
```sql
SELECT COUNT(*) FROM tickets WHERE status = 'open'
```
**–õ–æ–≥–∏–∫–∞:** –í—Å–µ –Ω–æ–≤—ã–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã

### –ó–∞–¥–∞—á–∏:
```sql
SELECT COUNT(*) FROM tasks WHERE status = 'pending'
```
**–õ–æ–≥–∏–∫–∞:** –í—Å–µ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ "–æ–∂–∏–¥–∞–Ω–∏–µ"

### –ó–∞—è–≤–∫–∏:
```sql
SELECT COUNT(*) FROM submissions WHERE status = 'pending'
```
**–õ–æ–≥–∏–∫–∞:** –í—Å–µ –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ

### –°–æ–æ–±—â–µ–Ω–∏—è:
```sql
SELECT COUNT(DISTINCT sender_id) 
FROM messages 
WHERE receiver_id = {user_id} AND is_read = FALSE
```
**–õ–æ–≥–∏–∫–∞:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

---

## üë®‚Äçüíº –î–ª—è –ú–ï–ù–ï–î–ñ–ï–†–ê (manager):

### –¢–∏–∫–µ—Ç—ã:
```sql
SELECT COUNT(*) FROM tickets 
WHERE assigned_to = {user_id} 
  AND status != 'resolved' 
  AND status != 'closed'
```
**–õ–æ–≥–∏–∫–∞:** –¢–∏–∫–µ—Ç—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç—ã–µ

### –ó–∞–¥–∞—á–∏:
```sql
SELECT COUNT(*) FROM tasks 
WHERE assigned_to = {user_id} 
  AND is_read = FALSE
```
**–õ–æ–≥–∏–∫–∞:** –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

### –ó–∞—è–≤–∫–∏:
–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è (–∑–Ω–∞—á–µ–Ω–∏–µ: 0)

### –°–æ–æ–±—â–µ–Ω–∏—è:
```sql
SELECT COUNT(DISTINCT sender_id) 
FROM messages 
WHERE receiver_id = {user_id} AND is_read = FALSE
```
**–õ–æ–≥–∏–∫–∞:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

---

## üé§ –î–ª—è –ê–†–¢–ò–°–¢–ê (artist):

### –¢–∏–∫–µ—Ç—ã:
```sql
SELECT COUNT(*) FROM tickets 
WHERE created_by = {user_id} 
  AND status != 'open'
```
**–õ–æ–≥–∏–∫–∞:** –¢–∏–∫–µ—Ç—ã –∞—Ä—Ç–∏—Å—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—à—ë–ª –æ—Ç–≤–µ—Ç (—Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è —Å 'open')

### –ó–∞–¥–∞—á–∏:
–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è (–∑–Ω–∞—á–µ–Ω–∏–µ: 0)

### –ó–∞—è–≤–∫–∏:
–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è (–∑–Ω–∞—á–µ–Ω–∏–µ: 0)

### –°–æ–æ–±—â–µ–Ω–∏—è:
```sql
SELECT COUNT(DISTINCT sender_id) 
FROM messages 
WHERE receiver_id = {user_id} AND is_read = FALSE
```
**–õ–æ–≥–∏–∫–∞:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

---

## 4. –ü–æ–ª—è –≤ –ë–î –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è "–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ—Å—Ç–∏"

### –ó–∞–¥–∞—á–∏ (tasks):
- `is_read` (boolean) - –∑–∞–¥–∞—á–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `FALSE`
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∑–∞–¥–∞—á–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º

### –°–æ–æ–±—â–µ–Ω–∏—è (messages):
- `is_read` (boolean) - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `FALSE`
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–∏–∞–ª–æ–≥–∞

### –¢–∏–∫–µ—Ç—ã (tickets):
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤–º–µ—Å—Ç–æ –ø–æ–ª—è `is_read`
- –î–ª—è –∞—Ä—Ç–∏—Å—Ç–∞: –ª—é–±–æ–π —Å—Ç–∞—Ç—É—Å –∫—Ä–æ–º–µ 'open' = –µ—Å—Ç—å –æ—Ç–≤–µ—Ç
- –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –ª—é–±–æ–π –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ç–∏–∫–µ—Ç = –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å

### –ó–∞—è–≤–∫–∏ (submissions):
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å 'pending' –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö

---

## 5. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ UI

### –ò–∫–æ–Ω–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —Å—á—ë—Ç—á–∏–∫–æ–º:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É–º–º–∞—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ö—Ä–∞—Å–Ω—ã–π badge —Å —á–∏—Å–ª–æ–º
- –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ —Ä–∞–∑–¥–µ–ª–∞—Ö:
- –ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª (–¢–∏–∫–µ—Ç—ã, –ó–∞–¥–∞—á–∏, –°–æ–æ–±—â–µ–Ω–∏—è) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π —Å—á—ë—Ç—á–∏–∫
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## 6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–µ–±–∞—É–Ω—Å–∏–Ω–≥:
- –ú–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç DDoS –Ω–∞ backend –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –∫–ª–∏–∫–∞—Ö

### –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞:
- 30 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ò–Ω–¥–µ–∫—Å—ã –ë–î:
–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã (V0041 –º–∏–≥—Ä–∞—Ü–∏—è):
- `idx_tasks_assigned_to` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∑–∞–¥–∞—á –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
- `idx_messages_receiver_unread` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–¥—Å—á—ë—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `idx_notifications_user_unread` - –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## 7. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–∏—Ä–µ–∫—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–∏–ª –∑–∞–¥–∞—á—É –º–µ–Ω–µ–¥–∂–µ—Ä—É

1. **–î–∏—Ä–µ–∫—Ç–æ—Ä** —Å–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É ‚Üí `is_read = FALSE`, `assigned_to = manager_id`
2. **–ú–µ–Ω–µ–¥–∂–µ—Ä** –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   - –ó–≤—É–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –°—á—ë—Ç—á–∏–∫ –∑–∞–¥–∞—á —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1
   - –ë—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–ù–æ–≤—ã—Ö –∑–∞–¥–∞—á: 1"
3. **–ú–µ–Ω–µ–¥–∂–µ—Ä** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É ‚Üí `is_read = TRUE`
4. –°—á—ë—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –æ–ø—Ä–æ—Å–µ (–≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê—Ä—Ç–∏—Å—Ç —Å–æ–∑–¥–∞–ª —Ç–∏–∫–µ—Ç

1. **–ê—Ä—Ç–∏—Å—Ç** —Å–æ–∑–¥–∞—ë—Ç —Ç–∏–∫–µ—Ç ‚Üí `status = 'open'`, `created_by = artist_id`
2. **–î–∏—Ä–µ–∫—Ç–æ—Ä** –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   - –°—á—ë—Ç—á–∏–∫ —Ç–∏–∫–µ—Ç–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1
3. **–î–∏—Ä–µ–∫—Ç–æ—Ä** –Ω–∞–∑–Ω–∞—á–∞–µ—Ç —Ç–∏–∫–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—É ‚Üí `assigned_to = manager_id`, `status = 'in_progress'`
4. **–ú–µ–Ω–µ–¥–∂–µ—Ä** –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   - –°—á—ë—Ç—á–∏–∫ —Ç–∏–∫–µ—Ç–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1
5. **–ú–µ–Ω–µ–¥–∂–µ—Ä** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚Üí `status = 'resolved'`
6. **–ê—Ä—Ç–∏—Å—Ç** –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   - –°—á—ë—Ç—á–∏–∫ —Ç–∏–∫–µ—Ç–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1 (—Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è —Å 'open')

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

1. **–î–∏—Ä–µ–∫—Ç–æ—Ä** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É ‚Üí `is_read = FALSE`
2. **–ú–µ–Ω–µ–¥–∂–µ—Ä** –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   - –°—á—ë—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π: 1 (–æ–¥–∏–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å)
3. **–ú–µ–Ω–µ–¥–∂–µ—Ä** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ ‚Üí –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ `is_read = TRUE`
4. –°—á—ë—Ç—á–∏–∫ –æ–±–Ω—É–ª—è–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –æ–ø—Ä–æ—Å–µ

---

## 8. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ–¥—Å—á—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–π:
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `COUNT(DISTINCT sender_id)` –≤–º–µ—Å—Ç–æ `COUNT(*)`:
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ü—Ä–∏–º–µ—Ä:** 10 —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ = —Å—á—ë—Ç—á–∏–∫ "1", –∞ –Ω–µ "10"

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- Frontend: —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
- Backend: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω: 404

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `X-User-Id` + `X-Auth-Token`
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö origin (`Access-Control-Allow-Origin: *`)

---

## 9. –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### Short-term:
1. ‚úÖ WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–≤–º–µ—Å—Ç–æ polling)
2. –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å—ë –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ"
3. –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ª–æ–≥ —Å–æ–±—ã—Ç–∏–π)

### Mid-term:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∫–∞–∫–∏–µ —Ç–∏–ø—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å)
2. –†–∞–∑–Ω—ã–µ –∑–≤—É–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### Long-term:
1. Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
2. Telegram-–±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## 10. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:**
   - localStorage —Å–æ–¥–µ—Ä–∂–∏—Ç `auth_token` –∏ `user_id`?

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞:**
   - Notifications ‚Üí Allowed?

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend:**
   - `GET /unread-counts` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200?

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î:**
   - –ü–æ–ª—è `is_read` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö?
   - –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã (–º–∏–≥—Ä–∞—Ü–∏—è V0041)?

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend:**
   - NotificationContext –ø–æ–¥–∫–ª—é—á—ë–Ω –≤ App.tsx?
   - Interval —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)?

---

## 11. –í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (2025-10-20)

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ–ª—É—á–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–∏–∫–µ—Ç–∞—Ö –∏ –∑–∞–¥–∞—á–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω —Å–∞–º –Ω–∞–∑–Ω–∞—á–∞–ª –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
–ò–∑–º–µ–Ω—ë–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `notify_directors` —Å `true` –Ω–∞ `false` –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏:
- **–¢–∏–∫–µ—Ç—ã:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- **–ó–∞–¥–∞—á–∏:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- **–î–∏—Ä–µ–∫—Ç–æ—Ä:** –ù–ï –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–≤–æ–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö

### üìã –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
1. **–î–∏—Ä–µ–∫—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–∞–µ—Ç —Ç–∏–∫–µ—Ç/–∑–∞–¥–∞—á—É –º–µ–Ω–µ–¥–∂–µ—Ä—É** ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É
2. **–ê—Ä—Ç–∏—Å—Ç —Å–æ–∑–¥–∞—ë—Ç —Å—Ä–æ—á–Ω—ã–π —Ç–∏–∫–µ—Ç** ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞–º
3. **–ê—Ä—Ç–∏—Å—Ç –ø–∏—à–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ç–∏–∫–µ—Ç—É** ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É
4. **–ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å** ‚Üí –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–¥–∏—Ä–µ–∫—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤ —Å–ø–∏—Å–∫–µ)

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ (2025-10-20):
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö:** –ö–æ–≥–¥–∞ –∞—Ä—Ç–∏—Å—Ç –ø–∏—à–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ç–∏–∫–µ—Ç—É, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (–¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤)
- **–¢–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** `ticket_comment` —Å –∏–∫–æ–Ω–∫–æ–π üí¨
- **–§–∞–π–ª:** `src/components/TicketDialog.tsx`, —Å—Ç—Ä–æ–∫–∏ 151-165

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-20 (–¥–æ–±–∞–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö)  
**–í–µ—Ä—Å–∏—è:** 1.2